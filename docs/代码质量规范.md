# LDIMS MCP æœåŠ¡ä»£ç è´¨é‡è§„èŒƒ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº†LDIMS MCPæœåŠ¡é¡¹ç›®çš„ä»£ç è´¨é‡æ ‡å‡†å’Œæœ€ä½³å®è·µã€‚

## ğŸ”§ å·¥å…·é…ç½®

### ESLint é…ç½®

é¡¹ç›®ä½¿ç”¨ESLintè¿›è¡Œä»£ç è´¨é‡æ£€æŸ¥ï¼Œé…ç½®æ–‡ä»¶ï¼š`eslint.config.js`

#### ä¸»è¦è§„åˆ™
- **TypeScriptä¸¥æ ¼æ¨¡å¼**: å¯ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **ä»£ç å¤æ‚åº¦æ§åˆ¶**: å‡½æ•°å¤æ‚åº¦ä¸è¶…è¿‡15
- **ä»£ç é£æ ¼ç»Ÿä¸€**: ä½¿ç”¨åŒå¼•å·ã€åˆ†å·ç»“å°¾
- **å®‰å…¨æ€§æ£€æŸ¥**: ç¦ç”¨evalã€new Functionç­‰ä¸å®‰å…¨æ“ä½œ

#### å¤æ‚åº¦é™åˆ¶
- å‡½æ•°å¤æ‚åº¦: â‰¤ 15
- åµŒå¥—æ·±åº¦: â‰¤ 4å±‚
- æ–‡ä»¶è¡Œæ•°: â‰¤ 500è¡Œ
- å‡½æ•°è¡Œæ•°: â‰¤ 100è¡Œ
- å‚æ•°ä¸ªæ•°: â‰¤ 5ä¸ª

### Prettier é…ç½®

ä»£ç æ ¼å¼åŒ–é…ç½®æ–‡ä»¶ï¼š`.prettierrc.json`

#### æ ¼å¼è§„åˆ™
- ç¼©è¿›: 2ä¸ªç©ºæ ¼
- å¼•å·: åŒå¼•å·
- åˆ†å·: å¿…é¡»
- è¡Œå®½: 80å­—ç¬¦
- å°¾éšé€—å·: ES5å…¼å®¹

## ğŸ“Š ä»£ç è´¨é‡æ£€æŸ¥

### è‡ªåŠ¨åŒ–æ£€æŸ¥

```bash
# å®Œæ•´è´¨é‡æ£€æŸ¥
npm run quality

# è‡ªåŠ¨ä¿®å¤é—®é¢˜
npm run quality:fix

# æäº¤å‰æ£€æŸ¥
npm run pre-commit
```

### æ£€æŸ¥é¡¹ç›®

1. **ESLintæ£€æŸ¥**
   - è¯­æ³•é”™è¯¯
   - ç±»å‹é”™è¯¯
   - ä»£ç é£æ ¼
   - æœ€ä½³å®è·µ

2. **Prettieræ ¼å¼æ£€æŸ¥**
   - ä»£ç æ ¼å¼ä¸€è‡´æ€§
   - ç¼©è¿›å’Œç©ºæ ¼
   - æ¢è¡Œå’Œåˆ†å·

3. **å¤æ‚åº¦åˆ†æ**
   - å‡½æ•°å¤æ‚åº¦
   - æ–‡ä»¶å¤§å°
   - åµŒå¥—å±‚çº§
   - ä»£ç é‡å¤

## ğŸ¯ è´¨é‡æ ‡å‡†

### ä»£ç è´¨é‡ç­‰çº§

#### Açº§ (ä¼˜ç§€)
- ESLint: 0 é”™è¯¯, 0 è­¦å‘Š
- æ ¼å¼åŒ–: 100% ç¬¦åˆè§„èŒƒ
- å¤æ‚åº¦: æ‰€æœ‰å‡½æ•° â‰¤ 10

#### Bçº§ (è‰¯å¥½)
- ESLint: 0 é”™è¯¯, â‰¤ 5 è­¦å‘Š
- æ ¼å¼åŒ–: 100% ç¬¦åˆè§„èŒƒ
- å¤æ‚åº¦: æ‰€æœ‰å‡½æ•° â‰¤ 15

#### Cçº§ (åŠæ ¼)
- ESLint: 0 é”™è¯¯, â‰¤ 10 è­¦å‘Š
- æ ¼å¼åŒ–: â‰¥ 95% ç¬¦åˆè§„èŒƒ
- å¤æ‚åº¦: â‰¤ 2ä¸ªå‡½æ•°è¶…è¿‡15

#### Dçº§ (éœ€è¦æ”¹è¿›)
- å­˜åœ¨ESLinté”™è¯¯æˆ–ä¸ç¬¦åˆä¸Šè¿°æ ‡å‡†

### æ–‡ä»¶ç»„ç»‡è§„èŒƒ

```
src/
â”œâ”€â”€ config/          # é…ç½®ç®¡ç†
â”œâ”€â”€ types/           # ç±»å‹å®šä¹‰
â”œâ”€â”€ tools/           # MCPå·¥å…·å®ç°
â”œâ”€â”€ resources/       # MCPèµ„æºå®ç°
â”œâ”€â”€ handlers/        # è¯·æ±‚å¤„ç†å™¨
â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”œâ”€â”€ errors/          # é”™è¯¯å¤„ç†
â””â”€â”€ index.ts         # å…¥å£æ–‡ä»¶
```

### å‘½åè§„èŒƒ

#### æ–‡ä»¶å‘½å
- ä½¿ç”¨kebab-case: `user-service.ts`
- ç±»å‹æ–‡ä»¶: `types.ts` æˆ– `user.types.ts`
- æµ‹è¯•æ–‡ä»¶: `user-service.test.ts`

#### å˜é‡å‘½å
- å˜é‡/å‡½æ•°: camelCase
- å¸¸é‡: UPPER_SNAKE_CASE
- ç±»/æ¥å£: PascalCase
- ç§æœ‰æˆå‘˜: å‰ç¼€ä¸‹åˆ’çº¿

#### å‡½æ•°å‘½å
- åŠ¨è¯å¼€å¤´: `getUserById`, `validateInput`
- å¸ƒå°”è¿”å›: `is`, `has`, `can` å‰ç¼€
- å¼‚æ­¥å‡½æ•°: æ˜ç¡®è¡¨ç¤ºå¼‚æ­¥æ€§è´¨

### æ³¨é‡Šè§„èŒƒ

#### JSDoc æ³¨é‡Š
```typescript
/**
 * è·å–ç”¨æˆ·ä¿¡æ¯
 * 
 * @param userId - ç”¨æˆ·ID
 * @param includeProfile - æ˜¯å¦åŒ…å«è¯¦ç»†ä¿¡æ¯
 * @returns ç”¨æˆ·ä¿¡æ¯å¯¹è±¡
 * @throws {UserNotFoundError} ç”¨æˆ·ä¸å­˜åœ¨æ—¶æŠ›å‡º
 */
async function getUserById(
  userId: string, 
  includeProfile = false
): Promise<User> {
  // å®ç°...
}
```

#### è¡Œå†…æ³¨é‡Š
- è§£é‡Šå¤æ‚é€»è¾‘
- è¯´æ˜ä¸šåŠ¡è§„åˆ™
- æ ‡è®°TODO/FIXME

## ğŸš€ æœ€ä½³å®è·µ

### TypeScript ä½¿ç”¨

1. **ä¸¥æ ¼ç±»å‹æ£€æŸ¥**
   ```typescript
   // âœ… å¥½çš„åšæ³•
   interface User {
     id: string;
     name: string;
     email?: string;
   }
   
   // âŒ é¿å…ä½¿ç”¨ any
   const user: any = getData();
   ```

2. **ç±»å‹å®ˆå«**
   ```typescript
   function isUser(obj: unknown): obj is User {
     return typeof obj === 'object' && 
            obj !== null && 
            'id' in obj;
   }
   ```

3. **æ³›å‹ä½¿ç”¨**
   ```typescript
   function createResponse<T>(data: T): ApiResponse<T> {
     return { success: true, data };
   }
   ```

### é”™è¯¯å¤„ç†

1. **ç»Ÿä¸€é”™è¯¯ç±»å‹**
   ```typescript
   class McpError extends Error {
     constructor(
       public code: string,
       message: string,
       public details?: unknown
     ) {
       super(message);
     }
   }
   ```

2. **é”™è¯¯è¾¹ç•Œ**
   ```typescript
   try {
     await riskyOperation();
   } catch (error) {
     logger.error('Operation failed', { error });
     throw new McpError('OPERATION_FAILED', 'Failed to process request');
   }
   ```

### å¼‚æ­¥ç¼–ç¨‹

1. **Promise ä½¿ç”¨**
   ```typescript
   // âœ… ä½¿ç”¨ async/await
   async function fetchData(): Promise<Data> {
     const response = await api.get('/data');
     return response.data;
   }
   
   // âŒ é¿å… Promise é“¾
   function fetchData(): Promise<Data> {
     return api.get('/data').then(response => response.data);
   }
   ```

2. **å¹¶å‘å¤„ç†**
   ```typescript
   // å¹¶è¡Œæ‰§è¡Œ
   const [users, posts] = await Promise.all([
     fetchUsers(),
     fetchPosts()
   ]);
   ```

### æ€§èƒ½ä¼˜åŒ–

1. **é¿å…ä¸å¿…è¦çš„è®¡ç®—**
   ```typescript
   // âœ… ç¼“å­˜è®¡ç®—ç»“æœ
   const memoizedCalculation = useMemo(() => {
     return expensiveCalculation(data);
   }, [data]);
   ```

2. **åˆç†ä½¿ç”¨è§£æ„**
   ```typescript
   // âœ… åªè§£æ„éœ€è¦çš„å±æ€§
   const { id, name } = user;
   
   // âŒ é¿å…è¿‡åº¦è§£æ„
   const { ...everything } = user;
   ```

## ğŸ“ˆ æŒç»­æ”¹è¿›

### ä»£ç å®¡æŸ¥æ¸…å•

- [ ] ä»£ç ç¬¦åˆESLintè§„åˆ™
- [ ] ä»£ç æ ¼å¼ç¬¦åˆPrettierè§„èŒƒ
- [ ] å‡½æ•°å¤æ‚åº¦åˆç†
- [ ] ç±»å‹å®šä¹‰å®Œæ•´
- [ ] é”™è¯¯å¤„ç†æ°å½“
- [ ] æ³¨é‡Šæ¸…æ™°æœ‰ç”¨
- [ ] æµ‹è¯•è¦†ç›–å……åˆ†
- [ ] æ€§èƒ½è€ƒè™‘åˆç†

### è´¨é‡ç›‘æ§

1. **å®šæœŸæ£€æŸ¥**: æ¯æ¬¡æäº¤å‰è¿è¡Œè´¨é‡æ£€æŸ¥
2. **è¶‹åŠ¿åˆ†æ**: è·Ÿè¸ªä»£ç è´¨é‡æŒ‡æ ‡å˜åŒ–
3. **å›¢é˜ŸåŸ¹è®­**: å®šæœŸåˆ†äº«æœ€ä½³å®è·µ
4. **å·¥å…·æ›´æ–°**: ä¿æŒå·¥å…·å’Œè§„åˆ™çš„æœ€æ–°çŠ¶æ€

## ğŸ”— ç›¸å…³èµ„æº

- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/docs/)
- [ESLint è§„åˆ™æ–‡æ¡£](https://eslint.org/docs/rules/)
- [Prettier é…ç½®æ–‡æ¡£](https://prettier.io/docs/en/configuration.html)
- [Clean Code åŸåˆ™](https://github.com/ryanmcdermott/clean-code-javascript)